(()=>{var o={961:(e,t,s)=>{v=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",n={};var v,o,r,n,i,a=i={compressToBase64:function(e){if(null==e)return"";var t=i._compress(e,6,function(e){return o.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:i._decompress(t.length,32,function(e){return c(o,t.charAt(e))})},compressToUTF16:function(e){return null==e?"":i._compress(e,15,function(e){return v(e+32)})+" "},decompressFromUTF16:function(t){return null==t?"":""==t?null:i._decompress(t.length,16384,function(e){return t.charCodeAt(e)-32})},compressToUint8Array:function(e){for(var t=i.compress(e),s=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var n=t.charCodeAt(o);s[2*o]=n>>>8,s[2*o+1]=n%256}return s},decompressFromUint8Array:function(e){if(null==e)return i.decompress(e);for(var t=new Array(e.length/2),s=0,o=t.length;s<o;s++)t[s]=256*e[2*s]+e[2*s+1];var r=[];return t.forEach(function(e){r.push(v(e))}),i.decompress(r.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,function(e){return r.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),i._decompress(t.length,32,function(e){return c(r,t.charAt(e))}))},compress:function(e){return i._compress(e,16,function(e){return v(e)})},_compress:function(e,t,s){if(null==e)return"";for(var o,r,n,i,a={},c={},l="",h=2,u=3,d=2,p=[],b=0,g=0,f=0;f<e.length;f+=1)if(n=e.charAt(f),Object.prototype.hasOwnProperty.call(a,n)||(a[n]=u++,c[n]=!0),i=l+n,Object.prototype.hasOwnProperty.call(a,i))l=i;else{if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(o=0;o<d;o++)b<<=1,g==t-1?(g=0,p.push(s(b)),b=0):g++;for(r=l.charCodeAt(0),o=0;o<8;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1}else{for(r=1,o=0;o<d;o++)b=b<<1|r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1}0==--h&&(h=Math.pow(2,d),d++),delete c[l]}else for(r=a[l],o=0;o<d;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1;0==--h&&(h=Math.pow(2,d),d++),a[i]=u++,l=String(n)}if(""!==l){if(Object.prototype.hasOwnProperty.call(c,l)){if(l.charCodeAt(0)<256){for(o=0;o<d;o++)b<<=1,g==t-1?(g=0,p.push(s(b)),b=0):g++;for(r=l.charCodeAt(0),o=0;o<8;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1}else{for(r=1,o=0;o<d;o++)b=b<<1|r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r=0;for(r=l.charCodeAt(0),o=0;o<16;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1}0==--h&&(h=Math.pow(2,d),d++),delete c[l]}else for(r=a[l],o=0;o<d;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1;0==--h&&(h=Math.pow(2,d),d++)}for(r=2,o=0;o<d;o++)b=b<<1|1&r,g==t-1?(g=0,p.push(s(b)),b=0):g++,r>>=1;for(;;){if(b<<=1,g==t-1){p.push(s(b));break}g++}return p.join("")},decompress:function(t){return null==t?"":""==t?null:i._decompress(t.length,32768,function(e){return t.charCodeAt(e)})},_decompress:function(e,t,s){for(var o,r,n,i,a,c,l=[],h=4,u=4,d=3,p="",b=[],g={val:s(0),position:t,index:1},f=0;f<3;f+=1)l[f]=f;for(r=0,i=Math.pow(2,2),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;switch(r){case 0:for(r=0,i=Math.pow(2,8),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;c=v(r);break;case 1:for(r=0,i=Math.pow(2,16),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;c=v(r);break;case 2:return""}for(o=l[3]=c,b.push(c);;){if(e<g.index)return"";for(r=0,i=Math.pow(2,d),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;switch(c=r){case 0:for(r=0,i=Math.pow(2,8),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;l[u++]=v(r),c=u-1,h--;break;case 1:for(r=0,i=Math.pow(2,16),a=1;a!=i;)n=g.val&g.position,g.position>>=1,0==g.position&&(g.position=t,g.val=s(g.index++)),r|=(0<n?1:0)*a,a<<=1;l[u++]=v(r),c=u-1,h--;break;case 2:return b.join("")}if(0==h&&(h=Math.pow(2,d),d++),l[c])p=l[c];else{if(c!==u)return null;p=o+o.charAt(0)}b.push(p),l[u++]=o+p.charAt(0),o=p,0==--h&&(h=Math.pow(2,d),d++)}}};function c(e,t){if(!n[e]){n[e]={};for(var s=0;s<e.length;s++)n[e][e.charAt(s)]=s}return n[e][t]}void 0!==(s=function(){return a}.call(t,s,t,e))&&(e.exports=s)},607:function(e,t,s){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,s,o){void 0===o&&(o=s);var r=Object.getOwnPropertyDescriptor(t,s);r&&("get"in r?t.__esModule:!r.writable&&!r.configurable)||(r={enumerable:!0,get:function(){return t[s]}}),Object.defineProperty(e,o,r)}:function(e,t,s,o){e[o=void 0===o?s:o]=t[s]}),r=this&&this.__exportStar||function(e,t){for(var s in e)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||o(t,e,s)};Object.defineProperty(t,"__esModule",{value:!0}),r(s(397),t)},782:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PURGE_STATE_AFTER_SYNC_FAILED_TIMES=t.NAVIGATION_UNLOAD_STATE_LIMIT=t.SESSION_INACTIVE_KILL_TIME=t.PING_INTERVAL_IN_SECONDS=t.MAXIMUM_SESSION_REQUEST_RESPONSE_TIME=t.MINIMUM_TIME_BETWEEN_FORCED_SCREENSHOTS=t.MINIMUM_TIME_BETWEEN_SCREENSHOTS=t.CLICK_GROUP_INTERVAL=t.CLICK_GROUP_RADIUS=t.WATCHER_TIMEOUT_CHANGE_THRESHOLD=t.WATCHER_SPEED_UP_STEP=t.WATCHER_CYCLES_BETWEEN_EVAL=t.WATCHER_MAX_TIMEOUT=t.WATCHER_MIN_TIMEOUT=t.WATCHER_STARTING_TIMEOUT=void 0,t.WATCHER_STARTING_TIMEOUT=500,t.WATCHER_MIN_TIMEOUT=100,t.WATCHER_MAX_TIMEOUT=4e3,t.WATCHER_CYCLES_BETWEEN_EVAL=5,t.WATCHER_SPEED_UP_STEP=40,t.WATCHER_TIMEOUT_CHANGE_THRESHOLD=100,t.CLICK_GROUP_RADIUS=20,t.CLICK_GROUP_INTERVAL=400,t.MINIMUM_TIME_BETWEEN_SCREENSHOTS=5e3,t.MINIMUM_TIME_BETWEEN_FORCED_SCREENSHOTS=500,t.MAXIMUM_SESSION_REQUEST_RESPONSE_TIME=3250,t.PING_INTERVAL_IN_SECONDS=180,t.SESSION_INACTIVE_KILL_TIME=1e3*t.PING_INTERVAL_IN_SECONDS,t.NAVIGATION_UNLOAD_STATE_LIMIT=2e4,t.PURGE_STATE_AFTER_SYNC_FAILED_TIMES=3},850:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ByteBoost=t.BASE_API_URL=void 0;var o=s(356),r=s(230),n=s(258),i=s(81);const l=s(429);var a=s(410),c=s(882),h=s(958);const u=s(252);var d=s(670),p=s(592),b=s(872);const g=s(978),f=s(923);var v=s(737),m=s(838),s=s(886);t.BASE_API_URL="https://external.api.byteboost.io";const y={DEBUG:"#5075DA",INFO:"#50DA7C",ERROR:"#DA6550",WARN:"#DAB250"},_=[o.EventBus,h.PainpointTracker,n.RequestModule,m.DOM,r.Logger,i.ErrorModule,a.Navigations,d.Clicks,p.Screenshots,b.SessionRequests,c.Pinger,v.Sourcemaps,s.ClientPerformance];t.ByteBoost=class{modules;versionManager;performance;navigator;syncInitializedAt=0;apiKey;obfuscateLevel;_devMode=!1;minified;painpoints;inspectorId;wantedFiles=[];isInitialPageLoad=!1;constructor(e){"_byteboost_dev"in window&&"boolean"==typeof window._byteboost_dev&&!0===window._byteboost_dev&&(this._devMode=!0),this.info("starting",e),this.minified=e.minified,this.info("running "+(this.minified?"minified":"unminified")),this.painpoints=e.painpoints,this.obfuscateLevel=e.obfuscateLevel,this.navigator=window.navigator,this.performance=window.performance||self.performance,this.apiKey=e.apiKey,this.isInitialPageLoad=e.isInitialPageLoad??!1;let t=g.localStorageInterface.getInspectorId();if(!t&&!this.minified)throw new Error("Unable to find inspector id. Cannot start");!t&&this.minified&&(t=(0,g.generateInspectorId)(),g.localStorageInterface.setInspectorId(t)),this.inspectorId=t,this.versionManager=new f.VersionManager(this);let s=this.getPersistantData();!1===s&&(s={}),this.modules={};for(var o of _){o=new o;s.hasOwnProperty(o.namespace)?o.unpack(s[o.namespace]):o.onBuildNeeded(),this.modules[o.namespace]={namespace:o.namespace,module:o}}window.addEventListener("beforeunload",w)}handleModuleSync(e){for(var t in this.modules){t=this.modules[t].module;!1!==t.isDataModule&&(this.minified?this.minified&&t.canSync&&t.stopSync():(t.onEngineInflated(),t.startSync(e)))}}initializeModules(){for(var e in this.debug("initializing modules"),this.modules){var t=this.modules[e].module;"eventBus"!==e&&t.bindEventBus(this.getModule("eventBus")),t.bootPreload(),t.boot(),this.minified||t.onEngineInflated()}if(this.isInitialPageLoad)for(var s in this.modules)this.modules[s].module.onInitialSessionLoad();this.handleModuleSync(),this.minified||(this.syncInitializedAt=Date.now())}onEventBusPoll(){for(const e in this.modules)this.modules[e].module.garbageCollector.collect()}isGatheringSession=!1;async inflate(){if(this.minified&&!this.isGatheringSession){this.isGatheringSession=!0;var e=await(0,u.askForSession)();if(!e)return this.purge();this.setWantedFiles(e.files),this.setObfuscateLevel(e.obfuscateLevel);for(const t in this.modules)this.modules[t].module.onNewSettings({obfuscateLevel:this.getObfuscateLevel()});this.minified=!1,this.isGatheringSession=!1,this.handleModuleSync(!0)}}getModule(e){if(this.modules[e])return this.modules[e].module}hookIntoEventBus(e){this.getModule("eventBus")?.hookIntoBus(e)}getApiKey(){return this.apiKey}setWantedFiles(e){this.wantedFiles=e}getWantedFiles(){return this.wantedFiles??[]}debug(...e){this._devMode&&console.log("%c[byteboost]","color:"+y.DEBUG+";font-weight:bold;",...e)}info(...e){this._devMode&&console.log("%c[byteboost]","color:"+y.INFO+";font-weight:bold;",...e)}warn(...e){this._devMode&&console.log("%c[byteboost]","color:"+y.WARN+";font-weight:bold;",...e)}error(...e){this._devMode&&console.log("%c[byteboost]","color:"+y.ERROR+";font-weight:bold;",...e)}forceInfoLog(...e){console.log("%c[byteboost]","color:"+y.INFO+";font-weight:bold;",...e)}getInspectorId(){return this.inspectorId}async compilePersistantData(){var e,t={};for(e in this.modules){var s=await this.modules[e].module.pack();t[e]=s}return t}async purge(){await this.cleanup(),g.localStorageInterface.purge()}getPersistantData(){try{var e=JSON.parse(g.localStorageInterface.getItem(g.PERSISTANT_DATA_KEY)),t=JSON.parse(g.localStorageInterface.getItem(g.PERSISTANT_DATA_KEY_MAPPING)),s=Date.now(),o=(0,l.uncompressJSON)(e,t);if(this.debug("Uncompression took:",Date.now()-s,"ms"),o)return o;throw"unable to compress"}catch(e){return!1}}logStateItems(){let e=0;for(const s in this.modules){var t=this.modules[s].module;e+=t.garbageCollector.getStateCount()}console.log("byteboost state:",e)}enableDevMode(){this._devMode=!0}logSessionStartTime(){try{var e,t=g.localStorageInterface.getItem(g.BYTEBOOST_SESSION_START_KEY);t?(e=parseInt(t),isNaN(e)?console.log("INVALID START TIME"):console.log("js date start",new Date(e))):console.log("INVALID START TIME")}catch(e){console.log("INVALID START TIME (catched)",e)}}async kill(){await fetch(t.BASE_API_URL+"/v1beta/session/kill",{credentials:"include",headers:{"X-Auth-Token":window.byteboostKey}}),this.purge()}async getDump(){var e=await this.compilePersistantData(),t=document.createElement("a");t.setAttribute("href","data:text/plain;charset=utf-8, "+encodeURIComponent(JSON.stringify(e,null,2))),t.setAttribute("download","persistant.json"),document.body.appendChild(t),t.click(),document.body.removeChild(t)}async cleanup(){try{this.debug("cleaning up");var e,t=Date.now();for(e in this.modules){var s=this.modules[e].module;s.cleanup(),s.isDataModule&&s.forceSend()}var o=await this.compilePersistantData(),r=(this.debug("Got persistant data",o),Date.now()),[n,i]=(0,l.compressJSON)(o),a=(this.debug("Compression took:",Date.now()-r,"ms"),JSON.stringify(n)),c=JSON.stringify(i);try{g.localStorageInterface.setItem(g.PERSISTANT_DATA_KEY,a),g.localStorageInterface.setItem(g.PERSISTANT_DATA_KEY_MAPPING,c)}catch(e){this.error("Unable to save data to local storage",e)}g.localStorageInterface.setItem("_last_used_bb",Date.now().toString()),window.removeEventListener("beforeunload",w),this.info("terminated"),window._byteboost&&delete window._byteboost,console.log(Date.now()-t,"b")}catch(e){this._devMode&&console.log("cleanup error",e)}}setObfuscateLevel(e){this.obfuscateLevel=e}getObfuscateLevel(){return this.obfuscateLevel}};const w=async()=>{await window._byteboost.cleanup()}},264:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GarbageCollector=void 0;const n=s(850),i=s(601);t.GarbageCollector=class{myModule;optimization;isOptimizing=!1;constructor(e){this.myModule=e}setOptimization(e){this.isOptimizing=!0,this.optimization=e}collect(){if(this.isOptimizing&&(this.myModule.byteboost.minified||!this.myModule.isDataModule||!this.myModule.didLastRequestSucceed)){let e={};for(var[t,s]of(0,i.ObjectEntries)(this.optimization)){var o=this.myModule.state[t];s?Array.isArray(o)?o.length>s.count&&(s=this.myModule.state[t].slice(0,Math.floor(this.myModule.state[t].length/2)),e[t]=s,this.myModule.state[t]=o.slice(Math.floor(o.length/2))):this.myModule.byteboost.warn(this.myModule.namespace+" has garbage optimization that isn't an array: "+t.toString()):this.myModule.byteboost.warn(this.myModule.namespace+" unable to find optimization info for path: "+t.toString())}var r;this.myModule.isDataModule&&0!==(r=Object.keys(e)).length&&(1<r.length&&(this.myModule.byteboost.warn(`Found multiple garbage collected state items for: ${this.myModule.namespace}. picking: `+r[0].toString()),e={[r[0]]:e[r[0]]}),r=this.myModule.formatSyncData(e),this.myModule.byteboost.getModule("request")?.post(n.BASE_API_URL+"/v1beta/events/dumps",{data:r[Object.keys(r)[0]],type:this.myModule.apiNamespace,inspectorId:this.myModule.byteboost.getInspectorId()}))}}getStateCount(){let e=0;for(const s in this.optimization){var t=this.myModule.state[s];Array.isArray(t)?e+=t.length:this.myModule.byteboost.warn(this.myModule.namespace+" has garbage optimization that isn't an array: "+s)}return e}}},397:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDev=t.wrapWindow=void 0;const o=s(850),r=s(252),n=s(924);t.wrapWindow=()=>{if("undefined"!=typeof window&&!window._byteboost&&!window._startingByteboost){const t=async()=>{await(0,n.setupPersistantWorkers)();var e=await(0,r.preflightChecks)();!1!==e&&e?("_byteboost_dev"in window&&"boolean"==typeof window._byteboost_dev&&!0===window._byteboost_dev&&console.log("preflight succeeded"),window._byteboost=new o.ByteBoost({apiKey:window.byteboostKey,startByteboost:t,obfuscateLevel:e.obfuscateLevel,painpoints:e.painpoints,minified:e.minified,isInitialPageLoad:e.isInitialPageLoad}),window._byteboost.setWantedFiles(e.wantedFiles),window._byteboost.initializeModules()):("_byteboost_dev"in window&&"boolean"==typeof window._byteboost_dev&&!0===window._byteboost_dev&&console.log("preflight failed"),await(0,n.killPersistantWorkers)())};try{t()}catch(e){}}},(0,t.wrapWindow)();t.isDev=()=>!0},601:function(e,t,s){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectEntries=t.isNumber=t.tryParseNumber=t.randomString=t.uncompressString=t.compressString=t.findCircular=t.removeCircular=void 0;const r=o(s(961)),n=s(580);t.removeCircular=function(e){const o=new Map,r=e=>{if(o.set(e,!0),e)for(var[t,s]of Object.entries(e))if("object"==typeof s)if(Array.isArray(s)){if(i(s)){e[t]="[byteboost-3200] circular reference";break}}else o.has(s)?e[t]="[byteboost-3200] circular reference":r(s)};return r(e),e};const i=e=>{e=(0,n.getAllObjKeys)(e);if(!e)return!0;var t=[];for(const o of e){var s=o.join(".");if(t.includes(s))return!0;t.push(s)}return!1};t.findCircular=function(e){let o=!1;const r=new Map,n=e=>{if(r.set(e,!0),!o&&e)for(var[t,s]of Object.entries(e)){if(o)return;if("object"==typeof s)if(Array.isArray(s)){if(i(s)){o=!0;break}}else{if(r.has(s)){o=!0;break}n(s)}}};return n(e),o};t.compressString=e=>null==e?"":r.default.compress(e),t.uncompressString=e=>null==e?"":r.default.decompress(e),t.randomString=t=>{let s="";var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=o.length;for(let e=0;e<t;e++)s+=o.charAt(Math.floor(Math.random()*r));return s},t.tryParseNumber=e=>{try{var t=typeof e;if("number"!=t&&"string"!=t)return!1;if("number"==t)return e;var s=parseInt(e);if(isNaN(s))throw"NaN";return s}catch(e){return!1}},t.isNumber=e=>!1!==(0,t.tryParseNumber)(e);t.ObjectEntries=e=>Object.entries(e)},670:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Clicks=void 0;const o=s(782);var r=s(134);const n=s(601),i=s(580);class a extends r.BaseDataModule{_syncStatus={syncRequestedAt:-1,isSyncing:!1};constructor(){super("clicks"),this.garbageCollector.setOptimization({clicks:{count:150}})}getMousePos(e){var t,s;let o=e?.pageX??-1,r=e?.pageY??-1;return null==e.pageX&&null!=e.clientX&&(t=(s=e.target&&e.target.ownerDocument||document).documentElement,s=s.body,o=e.clientX+(t&&t.scrollLeft||s&&s.scrollLeft||0)-(t&&t.clientLeft||s&&s.clientLeft||0),r=e.clientY+(t&&t.scrollTop||s&&s.scrollTop||0)-(t&&t.clientTop||s&&s.clientTop||0)),{x:o??-1,y:r??-1}}onClick(t){var e=this.state.clicks.find(e=>t.x-o.CLICK_GROUP_RADIUS<e.x&&t.x+o.CLICK_GROUP_RADIUS>e.x&&t.y-o.CLICK_GROUP_RADIUS<e.y&&t.y+o.CLICK_GROUP_RADIUS>e.y&&t.when-o.CLICK_GROUP_INTERVAL<e.when);e?!0===this._syncStatus.isSyncing&&e.when<this._syncStatus.syncRequestedAt&&-1!==this._syncStatus.syncRequestedAt?this.state.clicks.push(t):(e.count++,this.emit("count_updated",{count:e.count})):(this.state.clicks.push(t),this.emit("count_updated",{count:1}))}gatherRelevantElementData(e){return{innerHTML:(0,n.compressString)(e.innerHTML),outerHTML:(0,n.compressString)(e?.outerHTML),scrollHeight:e?.scrollHeight,scrollLeft:e?.scrollLeft,scrollTop:e?.scrollTop,scrollWidth:e?.scrollWidth,scrollLeftMax:e?.scrollLeftMax,scrollTopMax:e?.scrollTopMax,clientHeight:e?.clientHeight,clientLeft:e?.clientLeft,clientTop:e?.clientTop,clientWidth:e?.clientWidth,attrId:e.getAttribute("id")??void 0,attrClassName:e.getAttribute("class")??void 0,attrStyle:e.getAttribute("style")??void 0}}getAppropriateClickEvent(e,t){var s=e.target||e.srcElement,e={...this.getMousePos(e),when:t||Date.now(),count:1,where:this.getCurrentPath()};return s?(t=s,{...e,element:this.gatherRelevantElementData(t),where:this.getCurrentPath()}):e}boundedClickListener(e){var t=Date.now(),e=(this.byteboost.getModule("screenshots")?.captureScreenshot(),this.getAppropriateClickEvent(e,t));this.emit("click",e)}boot(){this.on("click",e=>{this.onClick(e)}),this.on("count_updated",()=>{}),document.addEventListener("click",c,{capture:!0})}build(){return{clicks:[]}}cleanup(){document.removeEventListener("click",c)}formatSyncData(e){return e.clicks&&0!==e.clicks.length?(e=(0,i.cloneObject)(e),this._syncStatus={isSyncing:!0,syncRequestedAt:Date.now()},e):{_empty:!0}}onSync(e){e.response.success?(this.state.clicks=this.eventBus.cleanSyncedData(this.state.clicks,e),this._syncStatus={isSyncing:!1,syncRequestedAt:-1}):this.byteboost.error("Unable to sync clicks module.")}}t.Clicks=a;const c=e=>{var t;window._byteboost&&(t=window._byteboost.getModule("clicks"))&&t.boundedClickListener(e)}},838:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOM=void 0;var o,r=s(134);const n=s(580);(s=o=o||{}).DOMContentLoaded="DOMContentLoaded",s.DocumentLoaded="DocumentLoaded",s.DocumentUnloaded="DocumentUnloaded";class i extends r.BaseDataModule{constructor(){super("dom"),this.apiNamespace="domstates",this.garbageCollector.setOptimization({domStates:{count:100}})}getLatestUnloadState(){if(null!=this.state.lastUnloadEvent)return this.state.lastUnloadEvent;let e=null,t=0;for(const s of this.state.domStates)s.state===o.DocumentUnloaded&&s.when>t&&(e=s,t=s.when);return e}boot(){this.on("newState",e=>{this.state.domStates.push(e)}),window.__bb_dom__load&&null!=window.__bb_dom__load&&"number"==typeof window.__bb_dom__load&&this.emit("newState",{state:o.DOMContentLoaded,when:window.__bb_dom__load,where:this.getCurrentPath()}),this.emit("newState",{state:o.DocumentLoaded,when:Date.now(),where:this.getCurrentPath()})}cleanup(){var e={state:o.DocumentUnloaded,when:Date.now(),where:this.getCurrentPath()};this.state.lastUnloadEvent=e,this.emit("newState",e)}formatSyncData(e){return e.domStates&&0!==e.domStates.length?(delete(e=(0,n.cloneObject)(this.state)).lastUnloadEvent,e):{_empty:!0}}onSync(e){e.response.success?this.state.domStates=this.eventBus.cleanSyncedData(this.state.domStates,e):this.byteboost.error("Unable to sync dom module")}build(){return{domStates:[],lastUnloadEvent:void 0}}}t.DOM=i},81:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorModule=void 0;var o=s(134);const r=s(675),n=s(580);class i extends o.BaseDataModule{screenshots;constructor(){super("errors"),this.garbageCollector.setOptimization({errors:{count:80}})}getEmptyTrackedError(){return{when:Date.now(),message:"",where:this.getCurrentPath()}}generateTrackedError(e){var t=this.getEmptyTrackedError();try{return e.message?"object"==typeof e.message||Array.isArray(e.message)?("message"in e.message&&"stack"in e.message?(t.message=e.message.message,t.stack=e.message.stack):t.message=e.message,"object"==typeof t.message&&("message"in t.message?t.message=t.message.message:"name"in t.message&&(t.message=t.message.name)),"string"!=typeof t.message&&(t.message="UNKNOWN ERROR")):t.message=e.message:t.message="UNKNOWN ERROR",t}catch(e){return t.message="UNKNOWN ERROR",t}}processError(e){e=this.generateTrackedError(e);this.screenshots.captureScreenshot(!0),this.emit("onError",e,r.EVENT_PRIORITY.ERRORS)}onGenericError(e){this.processError({message:e.error})}handledRejectionError(e){}unhandledRejectionError(e){this.processError({message:e.reason})}boot(){var e=this.byteboost.getModule("screenshots");if(!e)throw new Error("Unable to get screenshots module!");this.screenshots=e,window.addEventListener("rejectionhandled ",c),window.addEventListener("unhandledrejection",l),window.addEventListener("error",a),this.on("onError",e=>{this.state.errors.push(e)}),this.on("onErrorLog",e=>{})}cleanup(){window.removeEventListener("rejectionhandled ",c),window.removeEventListener("unhandledrejection",l)}formatSyncData(e){return e.errors&&0!==e.errors.length?(0,n.cloneObject)(this.state):{_empty:!0}}onSync(e){e.response.success?this.state.errors=this.eventBus.cleanSyncedData(this.state.errors,e):this.byteboost.error("Unable to sync error module")}build(){return{errors:[]}}}t.ErrorModule=i;const a=e=>{window._byteboost&&window._byteboost.getModule("errors")?.onGenericError(e)},c=e=>{window._byteboost&&window._byteboost.getModule("errors")?.handledRejectionError(e)},l=e=>{window._byteboost&&window._byteboost.getModule("errors")?.unhandledRejectionError(e)}},356:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBus=t.ByteEvent=void 0;const o=s(580);var r=s(134);const n=s(397),i=s(601);var a=s(750);const c=s(762),l=s(810),h=e=>`${e}|${Date.now()}|`+(0,i.randomString)(8);class u{id;payload;eventId;_meta={dispatched:-1};delay;when;priority=0;constructor(e,t,s,o){e=(0,c.toByteId)(e,t);this.when=Date.now(),this.id=e,this.payload=s,this.eventId=h(e),this.delay={waited:0,toWait:0,lastPoll:0},o&&(this.priority=o)}isValid(){return!!(this.id&&this.payload&&this.delay&&this.eventId)}setPayload(e){this.payload=e}sharpen(e){return this.id=e.id,this.eventId=e.eventId,this.payload=e.payload,this.delay=e.delay,this._meta=e._meta,this.priority=e.priority,this.when=e.when,this}flatten(){return{id:this.id,payload:(0,o.cloneObject)(this.payload),delay:this.delay,_meta:this._meta,eventId:this.eventId,priority:this.priority,when:this.when}}wait(e){return this.delay.lastPoll=Date.now(),this.delay.toWait=e,this}copy(){return new u("","",{}).sharpen(this.flatten())}}t.ByteEvent=u;class d extends r.BaseModule{polling=!1;middlewares={before:[p,...a.beforeMiddlewares],after:[]};modulesToPoll=[];watcher;_garbage={events:[],eventsStr:[]};constructor(){super("eventBus"),this.watcher=new l.EventBusWatcher(this)}toByteId(e,t){return(0,c.toByteId)(e,t)}dispatch(e,t,s){this.dispatchEvent(new u(e,t,s))}dispatchEvent(e){try{if((0,n.isDev)()&&"object"==typeof e.payload&&!Array.isArray(e.payload)&&(0,i.findCircular)(e.payload))this.byteboost.error("unable to dispatch event. payload has circular properties -> new byte event:",e);else{const t=e.copy();Array.isArray(t.payload)?t.payload=t.payload.map(e=>(e.eventId=h(t.id),e)).filter(e=>null!=e):t.payload.eventId=t.eventId,this.state.eventQueue.push(t)}}catch(e){this.byteboost.error("Error on dispatch",e)}}listen(e,t,s){null!=this.state.eventListeners&&(e=(0,c.toByteId)(e,t),this.state.eventListeners.hasOwnProperty(e)?this.state.eventListeners[e].push(s):this.state.eventListeners[e]=[s])}getNextEvent(){return this.state.eventQueue[0]}removeNextEvent(){return this.state.eventQueue.shift()}before(e){let t=!0;for(var s of this.middlewares.before)if(!1===s(e)){t=!1;break}return t}addModulePolling(e){this.modulesToPoll.push(e)}enginePoll(){for(const e of this.modulesToPoll)e.onPoll();this.byteboost.onEventBusPoll()}after(t){t.id.startsWith("logger:")||this._busHooks.forEach(e=>e(t))}async sleep(t){await new Promise(e=>{setTimeout(()=>{e()},t)})}_busHooks=[];hookIntoBus(e){this._busHooks.push(e)}runEventContext(){let o=this.state.eventQueue.slice();const e=()=>{if(0===o.length)return null;let t=o[o.length-1],s=o.length-1;for(let e=0;e<o.length;e++)o[e].priority>t.priority&&(t=o[e],s=e);return o.splice(s,1),this.before(t)?t:e()};let t=e();var s;t&&(-1===(s=this.state.eventQueue.findIndex(e=>e.eventId===t.eventId))?this.byteboost.error("Unable to find event in event queue",t):(this.state.eventQueue.splice(s,1),this.state.processingEvents.push(t)))}dispatchNextProcessedEvent(){if(0===this.state.processingEvents.length)return null;var e,t=this.state.processingEvents[0];if(!(t.id in this.state.eventListeners)||0===this.state.eventListeners[t.id].length)return(0,n.isDev)()&&this.byteboost.warn("no listeners found for event:",t),null;this.byteboost.debug("dispatching event:",t);for(e of this.state.eventListeners[t.id])e(t.payload);return t._meta={dispatched:Date.now()},this.addHandledEvent(t),this.state.processingEvents.shift(),t}async poll(){var e;await this.sleep(this.watcher.getPollTime()),this.polling&&(this.watcher.onNewPoll(),null==this.state.eventListeners?(this.byteboost.error("[EventBus] No event listeners. Stopping polling"),this.polling=!1):(null!==(e=this.dispatchNextProcessedEvent())&&this.after(e),this.runEventContext(),this.enginePoll(),this.poll()))}declareGarbage(t,s){this._garbage.events.find(e=>t===e.app&&s===e.id)||(this._garbage.events.push({app:t,id:s}),this._garbage.eventsStr.push((0,c.toByteId)(t,s)))}removeHandledEvents(t){this.state.handledEvents=this.state.handledEvents.filter(e=>!t.includes(e.eventId))}getHandledEvent(t){if(t)return this.state.handledEvents.find(e=>e.eventId===t)}addHandledEvent(e){this.isGarbageEvent(e)||this.byteboost.minified||this.state.handledEvents.push(e.flatten())}cleanSyncedData(e,s){if(0===e.length)return e;let o=[];e=e.filter(e=>{var t,e=this.getHandledEvent(e.eventId);return!!e&&((t=!(e._meta.dispatched>s.data._syncRequestedAt))&&o.push(e.eventId),!t)});return this.removeHandledEvents(o),e}isGarbageEvent(e){return this._garbage.eventsStr.includes(e.id)}removeGarbageEvents(e){return e.filter(e=>{return!this._garbage.eventsStr.includes(e.id)})}packEventList(e){e=e.slice(),e=(0,i.removeCircular)((0,o.cloneObject)(e));return this.removeGarbageEvents(e)}unpackEventList(e){return e&&0!==e.length?e.map(e=>new u("","",{}).sharpen(e)):[]}boot(){this.polling=!0,this.declareGarbage("request","sync"),this.poll()}unpack(e){e.eventQueue=this.unpackEventList(e.eventQueue),e.processingEvents=this.unpackEventList(e.processingEvents),e.eventListeners={},super.unpack(e)}build(){return{eventQueue:[],processingEvents:[],eventListeners:{},lastEventId:"",handledEvents:[]}}async pack(){var e=this.packEventList(this.state.eventQueue),t=this.packEventList(this.state.processingEvents),s=this.state.handledEvents.slice(),s=(0,i.removeCircular)((0,o.cloneObject)(s));return{...this.state,eventListeners:null,eventQueue:e,processingEvents:t,handledEvents:s}}cleanup(){this.polling=!1}}t.EventBus=d;const p=e=>{if(!e.isValid()){var t=window._byteboost.getModule("eventBus");if(!t)return window._byteboost.error("Unable to find event bus module"),!1;t.byteboost.warn("Next event is invalid. Removing it",e),t.removeNextEvent()}return!0}},750:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.beforeMiddlewares=void 0;t.beforeMiddlewares=[e=>0===e.delay.toWait||(e.delay.waited=e.delay.waited+(Date.now()-e.delay.lastPoll),e.delay.lastPoll=Date.now(),e.delay.waited>e.delay.toWait)]},762:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toByteId=void 0;t.toByteId=(e,t)=>e+":"+t},810:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventBusWatcher=void 0;const o=s(782);t.EventBusWatcher=class{eventBus;timeout=-1;startTime=-1;cycle=0;cyclesTrackingInterval=o.WATCHER_CYCLES_BETWEEN_EVAL;utopiaInterval={cycles:-1,time:-1};constructor(e){this.eventBus=e,this.setTimeout(o.WATCHER_STARTING_TIMEOUT)}setTimeout(e){(e=e>o.WATCHER_MAX_TIMEOUT?o.WATCHER_MAX_TIMEOUT:e)<o.WATCHER_MIN_TIMEOUT&&(e=o.WATCHER_MIN_TIMEOUT),this.timeout=e,this.cyclesTrackingInterval=this.getCycleTrackingInterval(e),this.utopiaInterval.time=this.timeout*this.cyclesTrackingInterval,this.utopiaInterval.cycles=Math.floor(this.utopiaInterval.time/this.timeout)}getCycleTrackingInterval(e){return 3e3<e?2:Math.floor(800/e+4)}evaluate(){var e;-1!==this.startTime&&((e=Date.now()-this.startTime-this.utopiaInterval.time)>=o.WATCHER_TIMEOUT_CHANGE_THRESHOLD?this.setTimeout(this.timeout+e/10):this.setTimeout(this.timeout-o.WATCHER_SPEED_UP_STEP)),this.startTime=Date.now()}reset(){this.cycle=0,this.startTime=-1}onNewPoll(){this.cycle++,1e6<this.cycle?this.reset():this.cycle%this.cyclesTrackingInterval==0&&this.evaluate()}getPollTime(){return this.timeout}}},134:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BaseDataModule=t.BaseModule=void 0;const o=s(356),r=s(580),n=s(850),i=s(675),a=s(264);var c=s(154);const l=s(782);class h{state;namespace;isPolling=!1;isDataModule=!1;_eventBus;garbageCollector;obfuscateLevel=c.ObfuscateLevel.HIGH;constructor(e){this.namespace=e,this.garbageCollector=new a.GarbageCollector(this)}get byteboost(){return window._byteboost}bindEventBus(e){this._eventBus=e}get eventBus(){if("eventBus"===this.namespace)throw Error("Cannot access EventBus on EventBus");return this._eventBus}onEngineInflated(){}onInitialSessionLoad(){}emit(e,t,s){this.eventBus.dispatchEvent(new o.ByteEvent(this.namespace,e,t,s))}on(e,t){this.eventBus.listen(this.namespace,e,t)}onPoll(){}receivePolls(){var e=this.byteboost.getModule("eventBus");if(!e)throw new Error("Unable to find the event bus module. unable to start module polling.");e.addModulePolling(this),this.isPolling=!0}onNewSettings(e){this.obfuscateLevel=e.obfuscateLevel}bootPreload(){this.garbageCollector.collect(),this.obfuscateLevel=this.byteboost.getObfuscateLevel()}cleanup(){}onBuildNeeded(){var e=this.build();this.state={updated:Date.now(),...e}}unpack(e){this.state=e,this.bindDefaultPersistantData(e)}bindDefaultPersistantData(e){this.state.updated=Date.now()}async pack(){return this.state}}t.BaseModule=h;t.BaseDataModule=class extends h{apiNamespace;didLastRequestSucceed=!1;failedSyncsInRow=0;isDataModule=!0;canSync=!0;constructor(e){super(e),this.apiNamespace=this.namespace}formatSyncData(e){return(0,r.cloneObject)(e)}baseFormatSyncData(e){var t=this.formatSyncData(this.state);return!0===t?._empty?(e.dispatchEvent(new o.ByteEvent(this.namespace,"onSyncSkipped",t,i.EVENT_PRIORITY.ON_SYNC_SKIPPED).wait(15e3)),null):{data:t,_syncRequestedAt:Date.now()}}getCurrentPath(){return this.byteboost.getModule("navigations")?.getFormattedPath()??"UNKNOWN"}sync(e,t){var s;this.canSync&&(s=this.baseFormatSyncData(e))&&e.dispatchEvent(new o.ByteEvent("request","sync",{path:n.BASE_API_URL+"/v1beta/events/"+(this.apiNamespace??this.namespace),event:new o.ByteEvent(this.namespace,"onSync",{},i.EVENT_PRIORITY.SYNC_REQUEST_CALLBACK).flatten(),data:s},i.EVENT_PRIORITY.SYNC_REQUEST).wait(t?0:15e3))}stopSync(){this.canSync=!1}startSync(e){this.canSync=!0,this.doSync(e)}doSync(e){const t=this.byteboost.getModule("eventBus");if(!t)throw"[byteboost] un-able to get eventBus";t.declareGarbage(this.namespace,"onSync"),t.declareGarbage(this.namespace,"onSyncSkipped"),t.listen(this.namespace,"onSyncSkipped",e=>{!0===e?._empty&&this.sync(t)}),t.listen(this.namespace,"onSync",e=>{this.didLastRequestSucceed=e.response.success,e.response.success?0!==this.failedSyncsInRow&&(this.failedSyncsInRow=0):(this.failedSyncsInRow++,this.byteboost.debug("failed",this.failedSyncsInRow,"times in a row",this.namespace),this.failedSyncsInRow>=l.PURGE_STATE_AFTER_SYNC_FAILED_TIMES&&(this.byteboost.debug("rebuilding",this.namespace,"because of sync fails"),this.onBuildNeeded())),this.onSync(e),this.sync(t)}),this.sync(t,e)}forceSend(){if(this.canSync){var e=this.byteboost.getModule("eventBus");if(e){const t=this.baseFormatSyncData(e);if(t){const s=this.byteboost.getModule("request");s&&setTimeout(()=>{try{s.post(n.BASE_API_URL+"/v1beta/events/"+this.apiNamespace,t.data)}catch(e){}},0)}}}}}},230:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const o=s(601);var r=s(134);const n=s(580),i=s(675),a=s(154);class c extends r.BaseDataModule{logTrackingEnabled=!0;constructor(){super("logger"),this.apiNamespace="console",this.garbageCollector.setOptimization({logs:{count:350}})}cleanCircularStateObjects(){this.state.logs=(0,o.removeCircular)((0,n.cloneObject)(this.state)).logs}obfuscateLogDetail(e){return 1===this.obfuscateLevel?e.value=e.value.map(e=>{if("string"==typeof e)return"OBFUSCATED: "+(0,o.randomString)(e.length)}):2===this.obfuscateLevel&&(e.value=e.value.map(e=>"string"==typeof e?"OBFUSCATED (STR): "+(0,o.randomString)(e.length):`OBFUSCATED (${typeof e})`)),e}async trackLog(e,...t){"string"==typeof t[0]&&t[0].includes("[byteboost]")||(t={value:t,when:Date.now(),kind:e.toLowerCase(),where:this.getCurrentPath()},this.emit("log",t,i.EVENT_PRIORITY.LOGGER))}boot(){const r=this;this.eventBus.listen("logger","log",e=>{e.kind===a.ConsoleType.ERROR&&this.eventBus.dispatch("errors","onErrorLog",e),this.state.logs.push(this.obfuscateLogDetail(e))});for(const e in console)"function"==typeof console[e]&&(console[e]=function(t,s,o){if(s)return function(...e){s.apply(t,Array.prototype.slice.apply(e)),r.logTrackingEnabled&&r.trackLog(o,...e)}}(console,console[e],e))}build(){return{logs:[]}}async pack(){return this.cleanCircularStateObjects(),this.state}cleanup(){this.logTrackingEnabled=!1}formatSyncData(e){var t;return e.logs&&0!==e.logs.length?((t={logs:[]}).logs=e.logs.map(e=>"clear"===e.kind?{...e,value:"CONSOLE_CLEAR"}:{...e,value:e.value.map(e=>{if("object"==typeof e)try{return JSON.stringify(e)}catch(e){}return e}).join("").replace(/\n/g,"[[{{NEW_LINE}}]]")}),t):{_empty:!0}}onSync(e){e.response.success?this.state.logs=this.eventBus.cleanSyncedData(this.state.logs,e):this.byteboost.error("Unable to sync logger module.")}}t.Logger=c},410:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Navigations=void 0;const n=s(782);var o=s(134);const i=s(580);class r extends o.BaseDataModule{lastScreenshotTime=-1;constructor(){super("navigations"),this.garbageCollector.setOptimization({navigations:{count:200}})}getCurrentUserPath(){return window.location.pathname}handlePath(){let t=this.getCurrentUserPath();if(0===t.length&&(t="/"),this.state.currentPath.pathname!==t){var s=Date.now(),o=(0,i.cloneObject)(this.state.currentPath),r=(this.state.currentPath.pathname=t,this.byteboost.debug("path changed!",this.state.currentPath),this.byteboost.getModule("screenshots")?.captureScreenshot(!0),this.byteboost.getModule("dom")?.getLatestUnloadState());let e=void 0;r&&s-r.when<n.NAVIGATION_UNLOAD_STATE_LIMIT&&(e=s-r.when),this.emit("pathUpdate",{from:o.pathname,to:this.state.currentPath.pathname,when:s,where:o.pathname,took:e})}}getFormattedPath(){return this.state.currentPath.pathname}onPoll(){this.handlePath()}onEngineInflated(){this.state.initialPath.hasSent||this.byteboost.getModule("request")&&(this.state.initialPath.hasSent=!0)}boot(){this.receivePolls(),this.on("pathUpdate",e=>{this.state.navigations.push(e)})}formatSyncData(e){return e.navigations&&0!==e.navigations.length?(delete(e=(0,i.cloneObject)(e)).currentPath,delete e.initialPath,e):{_empty:!0}}onSync(e){e.response.success?this.state.navigations=this.eventBus.cleanSyncedData(this.state.navigations,e):this.byteboost.error("Unable to sync navigation module.")}build(){try{var e=this.getCurrentUserPath();return{navigations:[],currentPath:{pathname:e},initialPath:{hasSent:!1,path:e}}}catch(e){return{navigations:[],currentPath:{pathname:"/"},initialPath:{hasSent:!1,path:"/"}}}}}t.Navigations=r},958:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PainpointTracker=void 0;var o=s(134);const r=s(762),a=s(601);class n extends o.BaseModule{painpoints={};constructor(){super("painpointTracker")}painpointReached(){this.byteboost.minified&&(this.byteboost.debug("painpoint reached, spinning up full engine"),this.byteboost.inflate())}onPainpointReached(e){var t=this.state.tracked[e];if(t){if(t.reached=!0,0===(this.state.tracked[e]=t).with.length)return this.painpointReached();for(const o of t.with){var s=Object.values(this.state.tracked).find(e=>e.id===o);if(!s||!1===s.reached)return}this.painpointReached()}}getTrackedId(e){return e}getTrackedComparisonId(e,t){return`${this.getTrackedId(e)}-${t.getter}-`+t.matcher}reachedComparisonPainpoint(e,t,s){t={getter:s.getter,matcher:s.matcher,kind:"comparison",reached:!0,with:t.with,id:t.id},e=this.getTrackedComparisonId(e,s);this.state.tracked[e]=t,this.onPainpointReached(e)}checkComparisonPainpoint(t,s,o){for(const i of s.comparisons){var r=i.getter.split(".");if(r[0]in o){var n=o[r[0]];if(!n)return void this.byteboost.error("Unable to get path",r[0]);let e=(0,a.tryParseNumber)(i.matcher);r=typeof(e=!1===e?i.matcher:e);if(r!=typeof n)return;if("number"==r){if(e>=n)return this.reachedComparisonPainpoint(t,s,i)}else if(e===n)return this.reachedComparisonPainpoint(t,s,i)}}}checkCountPainpoint(e,t,s){e=this.getTrackedId(e);let o=this.state.tracked[e];o?o.count++:o={count:1,kind:"count",with:t.with,reached:!1,id:t.id},(this.state.tracked[e]=o).count>=t.count&&this.onPainpointReached(e)}onEventDispatched(e,t){if(this.byteboost.minified&&e in this.painpoints){var s=this.painpoints[e];if(Array.isArray(t))for(const o of t)switch(s.kind){case"count":this.checkCountPainpoint(e,s,o);break;case"comparison":this.checkComparisonPainpoint(e,s,o)}else switch(s.kind){case"count":this.checkCountPainpoint(e,s,t);break;case"comparison":this.checkComparisonPainpoint(e,s,t)}}}boot(){for(const e of this.byteboost.painpoints){const t=(0,r.toByteId)(e.event.namespace,e.event.name);this.painpoints[(0,r.toByteId)(e.event.namespace,e.event.name)]=e,this.eventBus.listen(e.event.namespace,e.event.name,e=>{this.onEventDispatched(t,e)})}}build(){return{tracked:{}}}}t.PainpointTracker=n},886:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ClientPerformance=void 0;var o=s(134);const r=s(580);class n extends o.BaseDataModule{constructor(){super("performance"),this.apiNamespace="performances",this.garbageCollector.setOptimization({performances:{count:450}})}pollCycleInterval=5;currentPollCycle=0;onPoll(){var e;this.currentPollCycle++,this.currentPollCycle<this.pollCycleInterval||(this.currentPollCycle=0,e=this.eventBus.watcher.getPollTime(),this.pollCycleInterval=this.eventBus.watcher.cyclesTrackingInterval,this.emit("rate",{eventBusPollRate:e,when:Date.now(),where:this.getCurrentPath()}))}boot(){this.receivePolls(),this.on("rate",e=>{this.state.performances.push(e)})}cleanup(){}formatSyncData(e){return e.performances&&0!==e.performances.length?(0,r.cloneObject)(this.state):{_empty:!0}}onSync(e){e.response.success?this.state.performances=this.eventBus.cleanSyncedData(this.state.performances,e):this.byteboost.error("Unable to sync performance module")}build(){return{performances:[]}}}t.ClientPerformance=n},882:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Pinger=void 0;const o=s(978);var r=s(134);const n=s(850),i=s(782);class a extends r.BaseModule{requestModule;lastPingTimestamp=0;constructor(){super("pinger")}async onPoll(){if(!this.byteboost.minified){var e=this.byteboost.syncInitializedAt;if(0!==e){e=(Date.now()-e)/1e3;if(!(e<i.PING_INTERVAL_IN_SECONDS)){if(0!==this.lastPingTimestamp)if((Date.now()-this.lastPingTimestamp)/1e3<i.PING_INTERVAL_IN_SECONDS)return;this.lastPingTimestamp=Date.now();e=await this.requestModule.get(n.BASE_API_URL+"/v1beta/session/ping");401===e.status&&(this.byteboost.cleanup(),o.localStorageInterface.purge()),this.byteboost.debug("DID PING",e)}}}}boot(){var e=this.byteboost.getModule("request");if(!e)throw new Error("Unable to get request module!");this.requestModule=e,this.receivePolls()}build(){return{}}}t.Pinger=a},258:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RequestModule=void 0;var o=s(134);const r=s(356);class n extends o.BaseModule{persistantHeaders={};lastPostTimestamp=0;constructor(){super("request")}isSuccessResponse(e){return 199<e&&e<300}handleStatusCode(e){401===e&&this.byteboost.kill()}async post(e,t){this.lastPostTimestamp=Date.now();try{var s=await fetch(e,{credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json",...this.persistantHeaders},method:"POST",body:JSON.stringify(t)});this.handleStatusCode(s.status);try{var o=await s.json();return this.isSuccessResponse(s.status)?{status:s.status,body:o,success:!0}:{status:s.status,body:o,success:!1}}catch(e){if(this.isSuccessResponse(s.status))return{status:s.status,body:{},success:!0};try{this.byteboost.error("Unexpected post request error.")}catch(e){}return{status:s.status,body:s.body,success:!1}}}catch(e){try{this.byteboost.error("Unexpected post request error.")}catch(e){}return{status:500,body:{},success:!1}}}async get(e){var e=await fetch(e,{credentials:"include",headers:{...this.persistantHeaders,Accept:"application/json"}}),t=(this.handleStatusCode(e.status),await e.json());return this.isSuccessResponse(e.status)?{status:e.status,body:t,success:!0}:{status:e.status,body:t,success:!1}}boot(){this.persistantHeaders={"X-Auth-Token":this.byteboost.getApiKey()},this.on("get",async e=>{var t=await this.get(e.path),e=new r.ByteEvent("","",{}).sharpen(e.event);e.setPayload(t),this.eventBus.dispatchEvent(e)}),this.on("sync",async e=>{var t=await this.post(e.path,e.data.data),s=new r.ByteEvent("","",{}).sharpen(e.event),t={response:t,responseTimestamp:Date.now(),data:e.data};s.setPayload(t),this.eventBus.dispatchEvent(s)})}build(){return{}}}t.RequestModule=n},592:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Screenshots=void 0;const r=s(782);var o=s(134);const n=s(601),i=s(765);class a extends o.BaseDataModule{screenshotWorker;lastScreenshotTime=-1;scrollableElements=[];scrollState={};constructor(){super("screenshots"),this.garbageCollector.setOptimization({screenshots:{count:150}})}getViewport(){return{width:window.innerWidth||window.outerWidth,height:window.innerHeight||window.outerHeight}}async captureScreenshot(e){try{var t,s,o=Date.now();!0===e&&o-r.MINIMUM_TIME_BETWEEN_FORCED_SCREENSHOTS<this.lastScreenshotTime||!e&&o-r.MINIMUM_TIME_BETWEEN_SCREENSHOTS<this.lastScreenshotTime||(this.lastScreenshotTime=o,this.byteboost.debug("capturing screenshot"),t=(new XMLSerializer).serializeToString(document),s=new TextEncoder,this.screenshotWorker.emit("screenshot:parse",{document:s.encode(t),when:o,where:this.getCurrentPath(),obfuscateLevel:this.obfuscateLevel,viewport:this.getViewport(),scrollState:this.scrollState}))}catch(e){this.byteboost.warn("Unable to process screenshot. Error: "+e?.toString())}}onInitialSessionLoad(){const e=this;let t=setTimeout(()=>{e.captureScreenshot(!0)},500);document.addEventListener("load",()=>{clearInterval(t),e.captureScreenshot(!0)})}onScreenshotFromWorker(e){e={when:e.when,where:e.where,viewport:e.viewport,scrollState:e.scrollState,compressed:(0,n.compressString)((new TextDecoder).decode(e.document))};this.emit("screenshot:processed",e)}setupScroll(){var e;for(const t of[...Array.from(document.getElementsByTagName("body")),...Array.from(document.getElementsByTagName("html")),...Array.from(document.getElementsByTagName("table")),document.getElementById("__next")])!t||t.scrollHeight<t.clientHeight||(e=(0,n.randomString)(10),t.setAttribute("data-bb__ss__",e),this.scrollableElements.push({id:e,elem:t}),this.scrollState[e]=t.scrollTop);document.addEventListener("scrollend",()=>{for(const e of this.scrollableElements)this.scrollState[e.id]=e.elem.scrollTop})}boot(){this.screenshotWorker=new i.WebWorker("screenshot-parser"),this.screenshotWorker.on("screenshot:parsed",e=>{this.byteboost.debug("got parsed screenshot",e),this.onScreenshotFromWorker(e)}),this.on("screenshot:processed",e=>{this.state.screenshots.push(e)}),this.setupScroll()}build(){return{screenshots:[]}}cleanup(){this.screenshotWorker&&this.screenshotWorker.kill()}formatSyncData(e){return e.screenshots&&0!==e.screenshots.length?e:{_empty:!0}}onSync(e){e.response.success?this.state.screenshots=this.eventBus.cleanSyncedData(this.state.screenshots,e):this.byteboost.error("Unable to sync screenshots module.")}}t.Screenshots=a},872:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SessionRequests=void 0;var o=s(134);const r=s(765),n=s(924);class i extends o.BaseDataModule{networkTracker;obfuscationWorker;constructor(){super("session_requests"),this.apiNamespace="requests",this.garbageCollector.setOptimization({requests:{count:500}})}onPoll(){this.networkTracker.emit("requests:get"),this.obfuscationWorker.emit("requests:get",{})}handleRequests(e){for(const t of e)"string"!=typeof t&&(t.referrer&&0!==t.referrer.length||(t.referrer=window.location.toString()),t.method=t.method.toLowerCase(),this.state.requests.push(t))}onNewSettings(e){this.obfuscateLevel=e.obfuscateLevel,this.obfuscationWorker.emit("obfuscate_level",this.obfuscateLevel)}fallbackFromServiceWorker(){this.byteboost.debug("falling back to fetch overrides");const l=fetch;fetch=async(...t)=>{try{var s=t[0],o=t[1],r=Date.now(),n={url:s,method:o?.method??"GET",requestHeaders:o?.headers??{},when:r};let e=null;try{e=await l(...t),n.took=Date.now()-r,n.ok=e.ok,n.redirected=e.redirected,n.status=e.status,n.statusText=e.statusText,n.type=e.type;var i,a,c={};for([i,a]of e.headers.entries())c[i]=a;n.responseHeaders=c}catch(e){n.responseFailed=!0}return this.emit("on-overriden-fetch",n),null===e?l(...t):e}catch(e){return fetch(...t)}}}boot(){this.receivePolls();var e=(0,n.getPersistantWorker)("network-tracker"),t=new r.WebWorker("request-obfuscation");t&&(this.obfuscationWorker=t,this.obfuscationWorker.emit("obfuscate_level",this.obfuscateLevel),this.obfuscationWorker.on("requests:obfuscated",e=>{0!==e.length&&this.emit("requests",e)})),e&&(this.networkTracker=e,this.networkTracker.onFail(()=>{this.fallbackFromServiceWorker()}),this.networkTracker.on("requests:get",e=>{0!==e.length&&this.obfuscationWorker.emit("requests:obfuscate",e)})),this.on("requests",e=>{this.handleRequests(e)}),this.on("on-overriden-fetch",e=>{this.obfuscationWorker.emit("requests:obfuscate",[e])})}build(){return{requests:[]}}formatSyncData(e){return e.requests&&0!==e.requests.length?{requests:e.requests.slice()}:{_empty:!0}}onSync(e){e.response.success?this.state.requests=this.eventBus.cleanSyncedData(this.state.requests,e):this.byteboost.error("Unable to sync session requests module.")}}t.SessionRequests=i},737:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sourcemaps=void 0;s(580);class o extends s(134).BaseDataModule{wantedFiles=[];navigations;relevantFiles=[];constructor(){super("sourcemaps"),this.apiNamespace="files"}dispatchWantedFiles(){var e;0!==this.wantedFiles.length&&(e=this.byteboost.getModule("session_requests"))&&(e.networkTracker.on("got_wanted_files",({files:e})=>{e=e.map(e=>({...e,where:this.getCurrentPath()}));this.emit("onWantedFiles",e)}),e.networkTracker.emit("wanted_files",{wantedFiles:this.wantedFiles}))}onEngineInflated(){if(this.wantedFiles=this.byteboost.getWantedFiles(),0===this.wantedFiles.length)this.relevantFiles=[];else{if(0===this.relevantFiles.length)return this.dispatchWantedFiles();let t=[];for(const s of this.wantedFiles){var e=this.relevantFiles.find(e=>e.filename===s);e&&(t.push(s),this.state.files.push(e))}if(this.relevantFiles=[],0===t.length)return this.dispatchWantedFiles();this.wantedFiles=this.wantedFiles.filter(e=>!t.includes(e)),this.dispatchWantedFiles()}}boot(){var e=this.byteboost.getModule("navigations");null!=e&&(this.navigations=e),this.on("onWantedFiles",e=>{for(const t of e)this.state.files.push(t)})}formatSyncData(e){return{_empty:!0}}onSync(e){e.response.success?this.state.files=this.eventBus.cleanSyncedData(this.state.files,e):this.byteboost.error("Unable to sync sourcemaps module.")}build(){return{files:[]}}}t.Sourcemaps=o},154:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ConsoleType=t.ObfuscateLevel=void 0,t.ObfuscateLevel={HIGH:2,2:"HIGH",MEDIUM:1,1:"MEDIUM",LOW:0,0:"LOW"},t.ConsoleType={DEBUG:"debug",ERROR:"error",INFO:"info",LOG:"log",WARN:"warn",DIR:"dir",DIRXML:"dirxml",TABLE:"table",TRACE:"trace",GROUP:"group",GROUPCOLLAPSED:"groupCollapsed",GROUPEND:"groupEnd",CLEAR:"clear",COUNT:"count",COUNTRESET:"countReset",ASSERT:"assert",PROFILE:"profile",PROFILEEND:"profileEnd",TIME:"time",TIMELOG:"timeLog",TIMEEND:"timeEnd",TIMESTAMP:"timeStamp",CONTEXT:"context",CREATETASK:"createTask",MEMORY:"memory"}},252:(e,b,t)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),b.askForSession=b.preflightChecks=void 0;const g=t(782),n=t(850),f=t(154),v=t(978),m=e=>199<e&&e<300;b.preflightChecks=async()=>{try{if(void 0===window.performance||void 0===window.performance.now)return!1;try{window.performance.now()}catch(e){return!1}if(!0===window._startingByteboost)return!1;try{if(!("DOMParser"in window))return!1;if(!("TextEncoder"in window&&"TextDecoder"in window))return!1;if(!("XMLSerializer"in window))return!1;new XMLSerializer}catch(e){return!1}if(!window.byteboostKey){var a=document.querySelector("[data-byteboost-key]");if(!a)return!1;var c=a.getAttribute("data-byteboost-key");if(!c)return!1;window.byteboostKey=c}if(window._startingByteboost=!0,!y())return!1;var l="true"===v.localStorageInterface.getItem("bb_sess");let e=!0;var h=-1;let t=!1,s=!1,o=f.ObfuscateLevel.HIGH,r=!0;var u,d=v.localStorageInterface.getItem("_last_used_bb");d?(s=!0,h=parseInt(d),Date.now()-h>g.SESSION_INACTIVE_KILL_TIME?t=!0:r=!1):v.localStorageInterface.purge();let n=[],i=(l&&!t&&s&&((u=await(0,b.askForSession)())?(e=!1,n=u.files,o=u.obfuscateLevel):v.localStorageInterface.purge()),!t&&s||(v.localStorageInterface.removeItem(v.BYTEBOOST_SESSION_START_KEY),v.localStorageInterface.purge()),null==v.localStorageInterface.getItem(v.BYTEBOOST_SESSION_START_KEY)&&v.localStorageInterface.setItem(v.BYTEBOOST_SESSION_START_KEY,Date.now().toString()),[]);if(e){var p=await fetch("https://cdn.byteboost.io/v1beta/painpoints",{headers:{Accept:"application/json","X-Auth-Token":window.byteboostKey}});if(!m(p.status))return!1;i=await p.json()}return{success:!0,obfuscateLevel:o,painpoints:i,minified:e,wantedFiles:n,isInitialPageLoad:r}}catch(e){return!1}};const y=()=>{var s=[];for(let e=0;e<10;e++){var o=window.performance.now();let t=0;for(let e=0;e<1e6;e++)t+=(t*e+10*e)/(10*e);o=window.performance.now()-o;s.push(o)}let e=0;for(const t of s)e+=t;return!(125<(e/=s.length))};b.askForSession=async()=>{var e=await(async()=>{let t=!1;try{await fetch(new Request("https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js")).catch(e=>t=!0)}catch(e){t=!0}return t})();let t=v.localStorageInterface.getInspectorId();if(t||(t=(0,v.generateInspectorId)(),v.localStorageInterface.setInspectorId(t),v.localStorageInterface.getInspectorId()))try{var s,o=window.performance.now(),r=await fetch(`${n.BASE_API_URL}/v1beta/session?hasAdblocker=${e}&id=${t}&where=`+window.location.pathname,{credentials:"include",headers:{"X-Auth-Token":window.byteboostKey,"x-bb-st":v.localStorageInterface.getItem(v.BYTEBOOST_SESSION_START_KEY)??""}});return m(r.status)?(s=await r.json(),window.performance.now()-o>g.MAXIMUM_SESSION_REQUEST_RESPONSE_TIME&&"reuse"!==s.sessionState?(await fetch(n.BASE_API_URL+"/v1beta/session/kill?networkPreflightFailed=true",{credentials:"include",headers:{"X-Auth-Token":window.byteboostKey}}),v.localStorageInterface.purge(),!1):(v.localStorageInterface.setItem("bb_sess","true"),{files:s.wantedFiles??[],obfuscateLevel:s.obfuscateLevel??f.ObfuscateLevel.HIGH})):(v.localStorageInterface.purge(),!1)}catch(e){return!1}else console.warn("unable to set inspector id. shutting down"),window._byteboost&&window._byteboost.purge()}},675:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EVENT_PRIORITY=void 0,t.EVENT_PRIORITY={LOGGER:-1,ERRORS:5,SYNC_REQUEST:100,SYNC_REQUEST_CALLBACK:95,ON_SYNC_SKIPPED:90}},429:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uncompressJSON=t.compressJSON=void 0;t.compressJSON=e=>{let r={},n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0,a=1;const c=e=>{var t,s=[];for(t of e)"object"!=typeof t?s.push(t):Array.isArray(t)?s.push(c(t)):s.push(l(t));return s},l=e=>{var t,s={};for(t in e){var o=(e=>{if(e in r)return r[e];let t="";if(i>=n.length&&(i=0,a++),1!==a)for(let e=0;e<a;e++)i+e>=n.length&&(i=0,a++),t+=n[i+e];else t=n[i];var s=`£${t}£`;return i++,r[e]=s})(t);"object"!=typeof e[t]?s[o]=e[t]:Array.isArray(e[t])?s[o]=c(e[t]):s[o]=l(e[t])}return s};var t,e=l(e),s={};for(t in r)s[r[t]]=t;return[e,s]};const n=(e,t)=>{var s,o=[];for(s of e)"object"!=typeof s?o.push(s):Array.isArray(s)?o.push(n(s,t)):o.push(i(s,t));return o},i=(e,t)=>{var s,o={};for(s in e){var r=t(s);"object"!=typeof e[s]?o[r]=e[s]:Array.isArray(e[s])?o[r]=n(e[s],t):o[r]=i(e[s],t)}return o};t.uncompressJSON=(e,t)=>{return i(e,e=>t[e])}},978:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.localStorageInterface=t.generateInspectorId=t.PERSISTANT_DATA_KEY_MAPPING=t.PERSISTANT_DATA_KEY=t.BYTEBOOST_SESSION_START_KEY=void 0;const o=s(601),r=(t.BYTEBOOST_SESSION_START_KEY="__bb_st",t.PERSISTANT_DATA_KEY="__byteboost.io__persistant_data",t.PERSISTANT_DATA_KEY_MAPPING=t.PERSISTANT_DATA_KEY+"_m","__bb_id");t.generateInspectorId=()=>"_inspect_"+(0,o.randomString)(12),t.localStorageInterface={getInspectorId:function(){return this.getItem(r)},setInspectorId:function(e){this.setItem(r,e)},getItem:function(e){return localStorage.getItem(e)},setItem:function(e,t){localStorage.setItem(e,t)},removeItem:function(e){localStorage.removeItem(e)},purge:function(){localStorage.removeItem("bb_sess"),localStorage.removeItem("_last_used_bb"),localStorage.removeItem(t.BYTEBOOST_SESSION_START_KEY),localStorage.removeItem(r),this.purgeDataPoints()},purgeDataPoints:function(){localStorage.removeItem(t.PERSISTANT_DATA_KEY),localStorage.removeItem(t.PERSISTANT_DATA_KEY_MAPPING)}}},580:(e,l,t)=>{"use strict";Object.defineProperty(l,"__esModule",{value:!0}),l.getAllObjKeys=l.cloneObject=void 0;const h=t(601);l.cloneObject=e=>{if(Array.isArray(e))return e.slice();if("object"!=typeof e)return e;let t=(0,h.removeCircular)(e),s={};const o=e=>"object"!=typeof e,r=e=>!!Array.isArray(e),n=e=>e.map(e=>o(e)?e:(r(e)?n:(0,l.cloneObject))(e));var i,a;for(i in t){var c=t[i];a=i,c=c,o(c)?s[a]=c:r(c)?s[a]=n(c):s[a]=(0,l.cloneObject)(t[a])}return s};l.getAllObjKeys=e=>{if(!e||"object"!=typeof e)return[];var t=[],s=[{obj:e,path:[]}];let o=0;for(;0<s.length;){if(500<++o)return!1;var{obj:r,path:n}=s.pop();if("object"==typeof r&&null!==r)for(const i in r)s.push({obj:r[i],path:[...n,i]});else t.push(n)}return t}},765:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorker=t.WorkerHandler=void 0;t.WorkerHandler=class{initialized=!1;filePath;workerState={ready:!1,upgrading:!1};currentWorker;workerRegistration;_subscriptions=new Map;_messageQueue=[];_hasFailed=!1;_failCb=null;constructor(e,t){if("undefined"==typeof window)throw new Error("Unable to initialize service worker on server");window._byteboost_workers||(window._byteboost_workers=new Map);var s=window._byteboost_workers.get(e);if(s)return s;this.filePath=t,window._byteboost_workers.set(e,this)}canCommunicate(){return this.workerState.ready&&!this.workerState.upgrading&&!this._hasFailed}on(e,t){this._subscriptions.set(e,t)}emit(e,t){this.currentWorker&&this.canCommunicate()?this.currentWorker.postMessage({id:e,payload:t}):this._messageQueue.push({id:e,payload:t})}onReady(){if(this.workerState.ready=!0,0!==this._messageQueue.length&&this.currentWorker&&this.canCommunicate())for(const e of this._messageQueue)this.emit(e.id,e.payload)}onWorkerMessage(e){var e=e.data,t=this._subscriptions.get(e.id);t&&t(e.payload)}registerWorker(e){this.currentWorker=e,navigator.serviceWorker.removeEventListener("message",e=>{this.onWorkerMessage(e)}),navigator.serviceWorker.addEventListener("message",e=>{this.onWorkerMessage(e)}),this.onReady()}kill(){this.workerRegistration&&this.workerRegistration.unregister()}onFail(e){this._hasFailed?e():this._failCb=e}failed(){this._hasFailed||(this._hasFailed=!0,this._failCb&&this._failCb())}init(){try{this.initialized||(this.initialized=!0,navigator&&"serviceWorker"in navigator?navigator.serviceWorker.register(this.filePath).then(e=>{(this.workerRegistration=e).active&&this.registerWorker(e.active),e.addEventListener("updatefound",()=>{this.workerState.upgrading=!0;const t=e.installing;t&&(t.onstatechange=e=>{"redundant"===t.state&&this.failed(),"activated"===t.state&&(this.workerState.upgrading=!1,this.workerState.ready=!1,this.registerWorker(t))})})}).catch(e=>{this.failed()}):this.failed())}catch(e){this.failed()}}};const s={"screenshot-parser":"https://cdn.byteboost.io/v1beta/repo/inspector/screenshot.js","request-obfuscation":"https://cdn.byteboost.io/v1beta/repo/inspector/requests_obfs.js"};t.WebWorker=class{name;filePath;worker;isActive=!1;_subscriptions=new Map;unsentMessages=[];constructor(e){this.name=e,this.filePath=s[e],this.start()}emit(e,t){this.isActive?this.worker.postMessage({id:e,payload:t}):this.unsentMessages.push({id:e,payload:t})}on(e,t){this._subscriptions.set(e,t)}kill(){this.worker&&this.worker.terminate()}start(){this.worker=new Worker(this.getWorkerUrl()),this.worker.onmessage=e=>{var t=e.data.id,e=e.data.payload;if("_self"===t&&"string"==typeof e&&"active"===e){if(this.isActive=!0,0!==this.unsentMessages.length){for(const s of this.unsentMessages)this.worker.postMessage(s);this.unsentMessages=[]}}else this._subscriptions.has(t)&&this._subscriptions.get(t)(e)}}getWorkerUrl(){var e=`importScripts( "${this.filePath}" );`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))}}},923:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VersionManager=void 0;const o=s(978),r="__bb_ver_";t.VersionManager=class{byteboost;version="1.0.3";constructor(e){this.byteboost=e,this.handleVersion(),this.saveVersion()}saveVersion(){o.localStorageInterface.setItem(r,this.version)}handleVersion(){var e=o.localStorageInterface.getItem(r);e&&e===this.version||(this.byteboost.debug("migrating from version",e,"to",this.version),o.localStorageInterface.purgeDataPoints())}}},924:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPersistantWorker=t.killPersistantWorkers=t.setupPersistantWorkers=void 0;const o=s(765);t.setupPersistantWorkers=async()=>{new o.WorkerHandler("network-tracker","/byteboost.js").init()},t.killPersistantWorkers=async()=>{window._byteboost_workers.forEach(e=>{e.kill()})};t.getPersistantWorker=e=>window._byteboost_workers.get(e)}},r={};(function e(t){var s=r[t];return void 0===s&&(s=r[t]={exports:{}},o[t].call(s.exports,s,s.exports,e)),s.exports})(607)})();
